{"ast":null,"code":"var _jsxFileName = \"/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/src/pages/Profile.jsx\";\nimport React, { Component } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport UserContext from \"../components/Auth/UserContext\";\nimport apiHandler from \"../api/apiHandler\";\nimport FormEditAnnounce from \"../components/Forms/FormEditAnnounce\";\nimport { Link } from \"react-router-dom\";\n\nclass Profile extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      userAnnounces: [],\n      selectedAnnounce: null\n    };\n\n    this.deleteAnnounce = announceId => {\n      apiHandler.removeAnnounce(announceId).then(() => {\n        const userAnnounces = [...this.state.userAnnounces].filter(announce => announce._id !== announceId);\n        this.setState({\n          userAnnounces\n        });\n      });\n    };\n\n    this.onAnnounceSelect = announceId => {\n      const selectedAnnounce = this.state.userAnnounces.find(announce => announce._id === announceId);\n      this.setState({\n        selectedAnnounce: selectedAnnounce\n      });\n    };\n\n    this.onEditFormClose = () => {\n      this.setState({\n        selectedAnnounce: null\n      });\n    };\n\n    this.handleAnnounceUpdate = updatedAnnounce => {\n      const userAnnounces = [...this.state.userAnnounces].map(announce => announce._id === updatedAnnounce._id ? updatedAnnounce : announce);\n      this.setState({\n        userAnnounces\n      });\n    };\n\n    this.addAnnounce = announce => {\n      this.setState({\n        userAnnounces: [...this.state.userAnnounces, announce]\n      });\n    };\n  }\n\n  componentDidMount() {\n    apiHandler.getUserAnnounce().then(data => {\n      this.setState({\n        userAnnounces: data\n      });\n    });\n  }\n\n  render() {\n    const {\n      user\n    } = this.context;\n    const {\n      userAnnounces,\n      selectedAnnounce\n    } = this.state;\n    if (!user) return null;\n    return /*#__PURE__*/React.createElement(\"section\", {\n      className: \"Profile\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 7\n      }\n    }, selectedAnnounce && /*#__PURE__*/React.createElement(FormEditAnnounce, {\n      item: selectedAnnounce,\n      handleClose: this.onEditFormClose,\n      onItemUpdate: this.handleAnnounceUpdate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }\n    }), user && this.props.displayForm && /*#__PURE__*/React.createElement(FormAnnouncement, {\n      handleClose: this.props.handleFormClose,\n      addAnnounce: this.addAnnounce,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"user-presentation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }\n    }, user.username), /*#__PURE__*/React.createElement(Link, {\n      className: \"link\",\n      to: \"/profile/settings\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }\n    }, \"Edit profile\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"user-contact\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"form\",\n      onChange: this.handlePhoneNumber,\n      onSubmit: this.submitPhoneNumber,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"label\",\n      htmlFor: \"phoneNumber\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 15\n      }\n    }, \"Phone number\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"input\",\n      id: \"phoneNumber\",\n      type: \"text\",\n      name: \"phoneNumber\",\n      defaultValue: this.context.user.phoneNumber || \"\",\n      placeholder: \"Add phone number\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Button, {\n      primary: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 13\n      }\n    }, \"Add phone number\"))), !userAnnounces.length && /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"\",\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }\n    }, \"You don't have any  :(\")), !!userAnnounces.length && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"CardItems\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }\n    }, \"Your announcements\"), userAnnounces.map((announce, index) => /*#__PURE__*/React.createElement(CardItem, Object.assign({\n      key: index\n    }, announce, {\n      handleDelete: this.deleteAnnounce,\n      handleEdit: this.onAnnounceSelect,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 15\n      }\n    })))));\n  }\n\n}\n\nProfile.contextType = UserContext;\nexport default Profile;","map":{"version":3,"sources":["/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/src/pages/Profile.jsx"],"names":["React","Component","NavLink","UserContext","apiHandler","FormEditAnnounce","Link","Profile","state","userAnnounces","selectedAnnounce","deleteAnnounce","announceId","removeAnnounce","then","filter","announce","_id","setState","onAnnounceSelect","find","onEditFormClose","handleAnnounceUpdate","updatedAnnounce","map","addAnnounce","componentDidMount","getUserAnnounce","data","render","user","context","props","displayForm","handleFormClose","username","handlePhoneNumber","submitPhoneNumber","phoneNumber","length","index","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport UserContext from \"../components/Auth/UserContext\";\nimport apiHandler from \"../api/apiHandler\";\nimport FormEditAnnounce from \"../components/Forms/FormEditAnnounce\";\nimport { Link } from \"react-router-dom\";\n\nclass Profile extends Component {\n  static contextType = UserContext;\n  \n  state = {\n   userAnnounces:[],\n   selectedAnnounce: null,\n  };\n\n  componentDidMount() {\n    apiHandler\n    .getUserAnnounce()\n    .then((data) => {\n      this.setState({ userAnnounces: data });\n    });\n  }\n\n  deleteAnnounce = (announceId) => {\n    apiHandler.removeAnnounce(announceId).then(() => {\n      const userAnnounces = [...this.state.userAnnounces].filter(\n        (announce) =>  announce._id !== announceId\n      );\n      this.setState({ userAnnounces });\n    });\n  };\n\n  onAnnounceSelect = (announceId) => {\n    const selectedAnnounce = this.state.userAnnounces.find(\n      (announce) => announce._id === announceId\n    );\n    this.setState({ selectedAnnounce: selectedAnnounce });\n  };\n\n  onEditFormClose = () => {\n    this.setState({ selectedAnnounce: null });\n  };\n\n  handleAnnounceUpdate = (updatedAnnounce) => {\n    const userAnnounces = [...this.state.userAnnounces].map((announce) =>\n    announce._id === updatedAnnounce._id ? updatedAnnounce : announce\n    );\n    this.setState({ userAnnounces });\n  };\n  \n  addAnnounce = (announce) => {\n    this.setState({ userAnnounces: [...this.state.userAnnounces, announce] });\n  };\n\n  render() {\n    const { user } = this.context;\n    const { userAnnounces, selectedAnnounce } = this.state;\n    if (!user) return null;\n    \n    return (\n      <section className=\"Profile\">\n        {selectedAnnounce && (\n          <FormEditAnnounce\n            item={selectedAnnounce}\n            handleClose={this.onEditFormClose}\n            onItemUpdate={this.handleAnnounceUpdate}\n          />\n        )}\n        {user && this.props.displayForm && (\n          <FormAnnouncement\n            handleClose={this.props.handleFormClose}\n            addAnnounce={this.addAnnounce}\n          />\n        )}\n        <div className=\"user-presentation\">\n          <h2 className=\"title\">\n            {user.username}\n          </h2>\n          <Link className=\"link\" to=\"/profile/settings\">\n            Edit profile\n          </Link>\n        </div>\n\n        <div className=\"user-contact\">\n          <form\n            className=\"form\"\n            onChange={this.handlePhoneNumber}\n            onSubmit={this.submitPhoneNumber}\n          >\n            <div className=\"form-group\">\n              <label className=\"label\" htmlFor=\"phoneNumber\">\n                Phone number\n              </label>\n              <input\n                className=\"input\"\n                id=\"phoneNumber\"\n                type=\"text\"\n                name=\"phoneNumber\"\n                defaultValue={this.context.user.phoneNumber || \"\"}\n                placeholder=\"Add phone number\"\n              />\n            </div>\n            <Button primary>Add phone number</Button>\n          </form>\n        </div>\n\n        {!userAnnounces.length && (\n          <React.Fragment>\n            <div className=\"\">\n              <img src=\"\" alt=\"\" />\n            </div>\n            <p>You don't have any  :(</p>\n          </React.Fragment>\n        )}\n\n        {!!userAnnounces.length && (\n          <div className=\"CardItems\">\n            <h3>Your announcements</h3>\n            {userAnnounces.map((announce, index) => (\n              <CardItem\n                key={index}\n                {...announce}\n                handleDelete={this.deleteAnnounce}\n                handleEdit={this.onAnnounceSelect}\n              />\n            ))}\n          </div>\n        )}\n      </section>\n    );\n  \n     \n      \n  }\n}\n\n\n\nexport default Profile;\n\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _classCallCheck from\"/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";/*\n *  Thanks to @mc100s for this component\n *  https://github.com/mc100s\n *\n */var AutocompletePlace=/*#__PURE__*/function(_Component){_inherits(AutocompletePlace,_Component);var _super=_createSuper(AutocompletePlace);function AutocompletePlace(props){var _this;_classCallCheck(this,AutocompletePlace);_this=_super.call(this,props);_this.state={search:\"\",results:[],isLoading:false};_this.handleSearchChange=_this.handleSearchChange.bind(_assertThisInitialized(_this));return _this;}_createClass(AutocompletePlace,[{key:\"handleSearchChange\",value:function handleSearchChange(e){var _this2=this;this.setState({search:e.target.value,isLoading:true});// Stop the previous setTimeout if there is one in progress\nclearTimeout(this.timeoutId);// Launch a new request in 1000ms (1s) => Avoids excessive requests to the end point.\nthis.timeoutId=setTimeout(function(){_this2.performSearch();},1000);}},{key:\"performSearch\",value:function performSearch(){var _this3=this;if(this.state.search===\"\"){this.setState({results:[],isLoading:false});return;}// https://docs.mapbox.com/api/search/geocoding\naxios.get(\"https://api.mapbox.com/geocoding/v5/mapbox.places/\".concat(this.state.search,\".json?access_token=\").concat(process.env.REACT_APP_MAPBOX_TOKEN)).then(function(response){_this3.setState({results:response.data.features,isLoading:false});});}},{key:\"handleAnnounceClicked\",value:function handleAnnounceClicked(place){this.setState({search:place.place_name,results:[]});this.props.onSelect(place);}},{key:\"render\",value:function render(){var _this4=this;var _this$state=this.state,results=_this$state.results,isLoading=_this$state.isLoading;return/*#__PURE__*/React.createElement(\"div\",{className:\"AutocompletePlace\"},/*#__PURE__*/React.createElement(\"input\",{className:\"input\",type:\"text\",value:this.props.defaultValue||this.state.search,onChange:this.handleSearchChange,placeholder:\"Type an address\"}),/*#__PURE__*/React.createElement(\"ul\",{className:\"AutocompletePlace-results\"},results.map(function(place){return/*#__PURE__*/React.createElement(\"li\",{key:place.id,className:\"AutocompletePlace-announces\",onClick:function onClick(){return _this4.handleAnnounceClicked(place);}},place.place_name);}),isLoading&&/*#__PURE__*/React.createElement(\"li\",{className:\"AutocompletePlace-announces\"},\"Loading...\")));}}]);return AutocompletePlace;}(Component);export default AutocompletePlace;","map":{"version":3,"sources":["/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/src/components/AutoComplete.jsx"],"names":["React","Component","axios","AutocompletePlace","props","state","search","results","isLoading","handleSearchChange","bind","e","setState","target","value","clearTimeout","timeoutId","setTimeout","performSearch","get","process","env","REACT_APP_MAPBOX_TOKEN","then","response","data","features","place","place_name","onSelect","defaultValue","map","id","handleAnnounceClicked"],"mappings":"46BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAGA;AACA;AACA;AACA;AACA,G,GAEMC,CAAAA,iB,sHACJ,2BAAYC,KAAZ,CAAmB,mDACjB,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACXC,MAAM,CAAE,EADG,CAEXC,OAAO,CAAE,EAFE,CAGXC,SAAS,CAAE,KAHA,CAAb,CAKA,MAAKC,kBAAL,CAA0B,MAAKA,kBAAL,CAAwBC,IAAxB,+BAA1B,CAPiB,aAQlB,C,4FAEkBC,C,CAAG,iBACpB,KAAKC,QAAL,CAAc,CACZN,MAAM,CAAEK,CAAC,CAACE,MAAF,CAASC,KADL,CAEZN,SAAS,CAAE,IAFC,CAAd,EAKA;AACAO,YAAY,CAAC,KAAKC,SAAN,CAAZ,CAEA;AACA,KAAKA,SAAL,CAAiBC,UAAU,CAAC,UAAM,CAChC,MAAI,CAACC,aAAL,GACD,CAF0B,CAExB,IAFwB,CAA3B,CAGD,C,qDAEe,iBACd,GAAI,KAAKb,KAAL,CAAWC,MAAX,GAAsB,EAA1B,CAA8B,CAC5B,KAAKM,QAAL,CAAc,CACZL,OAAO,CAAE,EADG,CAEZC,SAAS,CAAE,KAFC,CAAd,EAIA,OACD,CACD;AACAN,KAAK,CACFiB,GADH,6DAEyD,KAAKd,KAAL,CAAWC,MAFpE,+BAEgGc,OAAO,CAACC,GAAR,CAAYC,sBAF5G,GAIGC,IAJH,CAIQ,SAACC,QAAD,CAAc,CAClB,MAAI,CAACZ,QAAL,CAAc,CACZL,OAAO,CAAEiB,QAAQ,CAACC,IAAT,CAAcC,QADX,CAEZlB,SAAS,CAAE,KAFC,CAAd,EAID,CATH,EAUD,C,oEAEqBmB,K,CAAO,CAC3B,KAAKf,QAAL,CAAc,CACZN,MAAM,CAAEqB,KAAK,CAACC,UADF,CAEZrB,OAAO,CAAE,EAFG,CAAd,EAKA,KAAKH,KAAL,CAAWyB,QAAX,CAAoBF,KAApB,EACD,C,uCAEQ,iCACwB,KAAKtB,KAD7B,CACCE,OADD,aACCA,OADD,CACUC,SADV,aACUA,SADV,CAEP,mBACE,2BAAK,SAAS,CAAC,mBAAf,eACE,6BACE,SAAS,CAAC,OADZ,CAEE,IAAI,CAAC,MAFP,CAGE,KAAK,CAAE,KAAKJ,KAAL,CAAW0B,YAAX,EAA2B,KAAKzB,KAAL,CAAWC,MAH/C,CAIE,QAAQ,CAAE,KAAKG,kBAJjB,CAKE,WAAW,CAAC,iBALd,EADF,cAQE,0BAAI,SAAS,CAAC,2BAAd,EACGF,OAAO,CAACwB,GAAR,CAAY,SAACJ,KAAD,qBACX,0BACE,GAAG,CAAEA,KAAK,CAACK,EADb,CAEE,SAAS,CAAC,6BAFZ,CAGE,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACC,qBAAL,CAA2BN,KAA3B,CAAN,EAHX,EAKGA,KAAK,CAACC,UALT,CADW,EAAZ,CADH,CAUGpB,SAAS,eAAI,0BAAI,SAAS,CAAC,6BAAd,eAVhB,CARF,CADF,CAuBD,C,+BAjF6BP,S,EAoFhC,cAAeE,CAAAA,iBAAf","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\n\n\n/*\n *  Thanks to @mc100s for this component\n *  https://github.com/mc100s\n *\n */\n\nclass AutocompletePlace extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      search: \"\",\n      results: [],\n      isLoading: false,\n    };\n    this.handleSearchChange = this.handleSearchChange.bind(this);\n  }\n\n  handleSearchChange(e) {\n    this.setState({\n      search: e.target.value,\n      isLoading: true,\n    });\n\n    // Stop the previous setTimeout if there is one in progress\n    clearTimeout(this.timeoutId);\n\n    // Launch a new request in 1000ms (1s) => Avoids excessive requests to the end point.\n    this.timeoutId = setTimeout(() => {\n      this.performSearch();\n    }, 1000);\n  }\n\n  performSearch() {\n    if (this.state.search === \"\") {\n      this.setState({\n        results: [],\n        isLoading: false,\n      });\n      return;\n    }\n    // https://docs.mapbox.com/api/search/geocoding\n    axios\n      .get(\n        `https://api.mapbox.com/geocoding/v5/mapbox.places/${this.state.search}.json?access_token=${process.env.REACT_APP_MAPBOX_TOKEN}`\n      )\n      .then((response) => {\n        this.setState({\n          results: response.data.features,\n          isLoading: false,\n        });\n      });\n  }\n\n  handleAnnounceClicked(place) {\n    this.setState({\n      search: place.place_name,\n      results: [],\n    });\n\n    this.props.onSelect(place);\n  }\n\n  render() {\n    const { results, isLoading } = this.state;\n    return (\n      <div className=\"AutocompletePlace\">\n        <input\n          className=\"input\"\n          type=\"text\"\n          value={this.props.defaultValue || this.state.search}\n          onChange={this.handleSearchChange}\n          placeholder=\"Type an address\"\n        />\n        <ul className=\"AutocompletePlace-results\">\n          {results.map((place) => (\n            <li\n              key={place.id}\n              className=\"AutocompletePlace-announces\"\n              onClick={() => this.handleAnnounceClicked(place)}\n            >\n              {place.place_name}\n            </li>\n          ))}\n          {isLoading && <li className=\"AutocompletePlace-announces\">Loading...</li>}\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default AutocompletePlace;\n"]},"metadata":{},"sourceType":"module"}
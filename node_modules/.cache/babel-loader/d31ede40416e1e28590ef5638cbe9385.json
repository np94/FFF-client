{"ast":null,"code":"import _toConsumableArray from\"/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{NavLink}from\"react-router-dom\";import UserContext from\"../components/Auth/UserContext\";import apiHandler from\"../api/apiHandler\";import{Link}from\"react-router-dom\";import withUser from\"../components/Auth/withUser\";var Profile=/*#__PURE__*/function(_Component){_inherits(Profile,_Component);var _super=_createSuper(Profile);function Profile(){var _this;_classCallCheck(this,Profile);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={userAnnounces:[],selectedAnnounce:null};_this.deleteAnnounce=function(announceId){apiHandler.removeAnnounce(announceId).then(function(){var userAnnounces=_toConsumableArray(_this.state.userAnnounces).filter(function(announce){return announce._id!==announceId;});_this.setState({userAnnounces:userAnnounces});});};_this.onAnnounceSelect=function(announceId){var selectedAnnounce=_this.state.userAnnounces.find(function(announce){return announce._id===announceId;});_this.setState({selectedAnnounce:selectedAnnounce});};_this.onEditFormClose=function(){_this.setState({selectedAnnounce:null});};_this.handleAnnounceUpdate=function(updatedAnnounce){var userAnnounces=_toConsumableArray(_this.state.userAnnounces).map(function(announce){return announce._id===updatedAnnounce._id?updatedAnnounce:announce;});_this.setState({userAnnounces:userAnnounces});};_this.addAnnounce=function(announce){_this.setState({userAnnounces:_toConsumableArray(_this.state.userAnnounces)});};return _this;}_createClass(Profile,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;apiHandler.getUserAnnounce().then(function(data){_this2.setState({userAnnounces:data});});}},{key:\"render\",value:function render(){var _this3=this;var user=this.context.user;var userAnnounces=this.state.userAnnounces;if(!user)return null;return/*#__PURE__*/React.createElement(\"section\",{className:\"Profile\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-presentation\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"title\"},user.username)),/*#__PURE__*/React.createElement(\"div\",{className:\"user-image\"},/*#__PURE__*/React.createElement(\"img\",{src:user.profileImg,alt:user.profileImg,style:{width:100,height:100}})),/*#__PURE__*/React.createElement(\"div\",{className:\"user-image\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"title\"},user.username,\" \",user.email,\" \",user.phone_number),/*#__PURE__*/React.createElement(\"button\",null,/*#__PURE__*/React.createElement(Link,{className:\"link\",to:\"/profile/settings\"},\"Edit profile\")),/*#__PURE__*/React.createElement(\"button\",null,/*#__PURE__*/React.createElement(NavLink,{to:\"/create\"},\"Report Missing\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"missing\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Your announcements\"),this.state.userAnnounces&&this.state.userAnnounces.map(function(announce){return/*#__PURE__*/React.createElement(\"div\",{className:\"missing_info\",key:announce._id},/*#__PURE__*/React.createElement(\"img\",{style:{width:\"100vw\",height:\"\"},src:announce.image,alt:announce.name}),/*#__PURE__*/React.createElement(Link,{to:\"/missing/\".concat(announce._id)},/*#__PURE__*/React.createElement(\"h2\",null,announce.title)),/*#__PURE__*/React.createElement(\"h3\",null,announce.name),/*#__PURE__*/React.createElement(\"h3\",null,announce.formattedAddress),/*#__PURE__*/React.createElement(\"h3\",null,announce.pet_type),/*#__PURE__*/React.createElement(\"h3\",null,announce.description),/*#__PURE__*/React.createElement(Link,{to:\"/profile/\".concat(announce._id,\"/edit\")},/*#__PURE__*/React.createElement(\"button\",null,\"Edit\")),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return _this3.deleteAnnounce(announce._id);}},\"Delete\"));})));}}]);return Profile;}(Component);Profile.contextType=UserContext;export default withUser(Profile);","map":{"version":3,"sources":["/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/src/pages/Profile.jsx"],"names":["React","Component","NavLink","UserContext","apiHandler","Link","withUser","Profile","state","userAnnounces","selectedAnnounce","deleteAnnounce","announceId","removeAnnounce","then","filter","announce","_id","setState","onAnnounceSelect","find","onEditFormClose","handleAnnounceUpdate","updatedAnnounce","map","addAnnounce","getUserAnnounce","data","user","context","username","profileImg","width","height","email","phone_number","image","name","title","formattedAddress","pet_type","description","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport UserContext from \"../components/Auth/UserContext\";\nimport apiHandler from \"../api/apiHandler\";\nimport { Link } from \"react-router-dom\";\nimport withUser from \"../components/Auth/withUser\"\n\n\nclass Profile extends Component {\n  static contextType = UserContext;\n  \n  state = {\n    userAnnounces:[],\n    selectedAnnounce: null,\n  };\n\n  componentDidMount() {\n    apiHandler\n    .getUserAnnounce()\n    .then((data) => {\n      this.setState({ userAnnounces: data });\n    });\n  }\n\n  deleteAnnounce = (announceId) => {\n    apiHandler.removeAnnounce(announceId).then(() => {\n      const userAnnounces = [...this.state.userAnnounces].filter(\n        (announce) =>  announce._id !== announceId\n      );\n      this.setState({ userAnnounces });\n    });\n  };\n\n  onAnnounceSelect = (announceId) => {\n    const selectedAnnounce = this.state.userAnnounces.find(\n      (announce) => announce._id === announceId\n    );\n    this.setState({ selectedAnnounce: selectedAnnounce });\n  };\n\n  onEditFormClose = () => {\n    this.setState({ selectedAnnounce: null });\n  };\n\n  handleAnnounceUpdate = (updatedAnnounce) => {\n    const userAnnounces = [...this.state.userAnnounces].map((announce) =>\n    announce._id === updatedAnnounce._id ? updatedAnnounce : announce\n    );\n    this.setState({ userAnnounces });\n  };\n  \n  addAnnounce = (announce) => {\n    this.setState({ userAnnounces: [...this.state.userAnnounces] });\n  };\n\n  render() {\n    const { user } = this.context;\n    const { userAnnounces } = this.state;\n    if (!user) return null;\n    return (\n      <section className=\"Profile\">\n        <div className=\"user-presentation\">\n          <h2 className=\"title\">\n            {user.username}\n          </h2>\n\n        </div>\n\n        <div className=\"user-image\">\n          <img src={user.profileImg} alt={user.profileImg} style={{width: 100, height: 100}} />\n        </div>\n        <div className=\"user-image\">\n          <h2 className=\"title\">\n            {user.username} {user.email} {user.phone_number}\n          </h2>\n          <button><Link className=\"link\" to=\"/profile/settings\">Edit profile</Link></button>\n          <button><NavLink to=\"/create\">Report Missing</NavLink></button>\n        </div>\n          \n          <div className=\"missing\">\n            <h3>Your announcements</h3>\n            {this.state.userAnnounces  && this.state.userAnnounces.map((announce) => {\n                    return (\n                        <div className=\"missing_info\" \n                        key={announce._id}   \n                       >\n                            <img\n                          style={{\n                            width: \"100vw\",\n                            height: \"\",\n                          }}\n                          src={announce.image}\n                          alt={announce.name}\n                            />\n                        <Link to={`/missing/${announce._id}`}>\n                          <h2>{announce.title}</h2>\n                        </Link>\n                        <h3>{announce.name}</h3>\n                        <h3>{announce.formattedAddress}</h3>\n                        <h3>{announce.pet_type}</h3>\n                        <h3>{announce.description}</h3>\n                        <Link to={`/profile/${announce._id}/edit`}>\n                    <button>Edit</button>\n                      </Link>\n                      <button onClick={() => this.deleteAnnounce(announce._id)}>\n                    Delete\n                  </button>\n                        \n                      </div>\n                    )}\n            )}\n          </div>\n      </section>\n    );\n  }\n}\n\n\nexport default withUser(Profile);\n\n"]},"metadata":{},"sourceType":"module"}
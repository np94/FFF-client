{"ast":null,"code":"import _defineProperty from\"/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{buildFormData}from\"../../utils\";import apiHandler from\"../../api/apiHandler\";import UserContext from\"../Auth/UserContext\";var FormProfile=/*#__PURE__*/function(_Component){_inherits(FormProfile,_Component);var _super=_createSuper(FormProfile);function FormProfile(){var _this;_classCallCheck(this,FormProfile);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={user:{username:\"\",password:\"\",profilImg:\"\",phone_number:0}};_this.imageRef=React.createRef();_this.handleChange=function(event){var key=event.target.name;var value=event.target.value;_this.setState({user:_objectSpread(_objectSpread({},_this.state.user),{},_defineProperty({},key,value))});};_this.isValidInput=function(key){if(_this.state.user[key]===\"\"){return false;}else return true;};_this.checkError=function(){for(var key in _this.state.user){if(_this.state[key]===\"\"){return true;}}return false;};_this.handleSubmit=function(event){event.preventDefault();var fd=new FormData();var data=Object.assign({},_this.state);buildFormData(fd,data);fd.append(\"profileImg\",_this.imageRef.current.files[0]);apiHandler.updateUser(fd).then(function(data){_this.props.history.push(\"/profile\");_this.setState({httpResponse:{status:\"success\",message:\"Profile successfully updated.\"}});_this.context.setUser(data);_this.timeoutId=setTimeout(function(){_this.setState({httpResponse:null});},2000);}).catch(function(error){_this.setState({httpResponse:{status:\"failure\",message:\"Something bad happened while updating your profile, try again later\"}});_this.timeoutId=setTimeout(function(){_this.setState({httpResponse:null});},2000);});};return _this;}_createClass(FormProfile,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var userId=this.props.match.params.id;apiHandler.getUserInfos(userId).then(function(data){_this2.setState({user:data});}).catch(function(error){console.log(error);});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"missing\"},/*#__PURE__*/React.createElement(\"form\",{className:\"form\",onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"h1\",{className:\"header\"},\"Edit profile\"),/*#__PURE__*/React.createElement(\"img\",{style:{width:100,height:100},src:this.state.user.profileImg,alt:\"animal\"}),/*#__PURE__*/React.createElement(\"label\",{className:\"label\",htmlFor:\"image\"}),/*#__PURE__*/React.createElement(\"input\",{ref:this.imageRef,onChange:this.handleChange,id:\"profilImg\",name:\"profilImg\",type:\"file\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"label\",htmlFor:\"username\"},\"Username\"),/*#__PURE__*/React.createElement(\"input\",{className:\"input\",id:\"username\",type:\"text\",name:\"username\",onChange:this.handleChange,value:this.state.user.username}),!this.isValidInput(\"username\")&&/*#__PURE__*/React.createElement(\"p\",{className:\"input-error\"},\"Invalid input\")),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"label\",htmlFor:\"password\"},\"Password\"),/*#__PURE__*/React.createElement(\"input\",{className:\"input\",id:\"password\",type:\"text\",name:\"password\",onChange:this.handleChange,value:this.state.user.password||\"\"}),!this.isValidInput(\"password\")&&/*#__PURE__*/React.createElement(\"p\",{className:\"input-error\"},\"Invalid input\")),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"label\",htmlFor:\"phoneNumber\"},\"Phone number\"),/*#__PURE__*/React.createElement(\"input\",{className:\"input\",id:\"phoneNumber\",type:\"text\",name:\"phoneNumber\",onChange:this.handleChange,value:this.state.user.phoneNumber}),!this.isValidInput(\"phoneNumber\")&&/*#__PURE__*/React.createElement(\"p\",{className:\"input-error\"},\"Invalid input\")),/*#__PURE__*/React.createElement(\"button\",null,\"Save\")));}}]);return FormProfile;}(Component);FormProfile.contextType=UserContext;export default FormProfile;","map":{"version":3,"sources":["/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/src/components/Forms/FormProfile.jsx"],"names":["React","Component","buildFormData","apiHandler","UserContext","FormProfile","state","user","username","password","profilImg","phone_number","imageRef","createRef","handleChange","event","key","target","name","value","setState","isValidInput","checkError","handleSubmit","preventDefault","fd","FormData","data","append","current","files","updateUser","then","props","history","push","httpResponse","status","message","context","setUser","timeoutId","setTimeout","catch","error","userId","match","params","id","getUserInfos","console","log","width","height","profileImg","phoneNumber","contextType"],"mappings":"ylCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,aAAT,KAA8B,aAA9B,CACA,MAAOC,CAAAA,UAAP,KAAuB,sBAAvB,CACA,MAAOC,CAAAA,WAAP,KAAwB,qBAAxB,C,GAGMC,CAAAA,W,+UAEJC,K,CAAQ,CACJC,IAAI,CAAE,CACJC,QAAQ,CAAE,EADN,CAEJC,QAAQ,CAAC,EAFL,CAGJC,SAAS,CAAE,EAHP,CAIJC,YAAY,CAAE,CAJV,CADF,C,OASRC,Q,CAAWZ,KAAK,CAACa,SAAN,E,OAcXC,Y,CAAe,SAACC,KAAD,CAAW,CACxB,GAAMC,CAAAA,GAAG,CAAGD,KAAK,CAACE,MAAN,CAAaC,IAAzB,CACA,GAAMC,CAAAA,KAAK,CAAGJ,KAAK,CAACE,MAAN,CAAaE,KAA3B,CACA,MAAKC,QAAL,CAAc,CAAEb,IAAI,gCAAO,MAAKD,KAAL,CAAWC,IAAlB,wBAAyBS,GAAzB,CAA+BG,KAA/B,EAAN,CAAd,EACD,C,OAEDE,Y,CAAe,SAACL,GAAD,CAAS,CACtB,GAAI,MAAKV,KAAL,CAAWC,IAAX,CAAgBS,GAAhB,IAAyB,EAA7B,CAAiC,CAC/B,MAAO,MAAP,CACD,CAFD,IAEO,OAAO,KAAP,CACR,C,OAEDM,U,CAAa,UAAM,CACjB,IAAK,GAAMN,CAAAA,GAAX,GAAkB,OAAKV,KAAL,CAAWC,IAA7B,CAAmC,CACjC,GAAI,MAAKD,KAAL,CAAWU,GAAX,IAAoB,EAAxB,CAA4B,CAC1B,MAAO,KAAP,CACD,CACF,CACD,MAAO,MAAP,CACD,C,OAEDO,Y,CAAe,SAACR,KAAD,CAAW,CACxBA,KAAK,CAACS,cAAN,GACA,GAAMC,CAAAA,EAAE,CAAG,GAAIC,CAAAA,QAAJ,EAAX,CAFwB,GAGdC,CAAAA,IAHc,kBAGN,MAAKrB,KAHC,EAIxBJ,aAAa,CAACuB,EAAD,CAAKE,IAAL,CAAb,CAEAF,EAAE,CAACG,MAAH,CAAU,YAAV,CAAwB,MAAKhB,QAAL,CAAciB,OAAd,CAAsBC,KAAtB,CAA4B,CAA5B,CAAxB,EAGA3B,UAAU,CACP4B,UADH,CACcN,EADd,EAEGO,IAFH,CAEQ,SAACL,IAAD,CAAU,CACd,MAAKM,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,UAAxB,EACA,MAAKf,QAAL,CAAc,CACZgB,YAAY,CAAE,CACZC,MAAM,CAAE,SADI,CAEZC,OAAO,CAAE,+BAFG,CADF,CAAd,EAMA,MAAKC,OAAL,CAAaC,OAAb,CAAqBb,IAArB,EACA,MAAKc,SAAL,CAAiBC,UAAU,CAAC,UAAM,CAChC,MAAKtB,QAAL,CAAc,CAAEgB,YAAY,CAAE,IAAhB,CAAd,EACD,CAF0B,CAExB,IAFwB,CAA3B,CAGD,CAdH,EAeGO,KAfH,CAeS,SAACC,KAAD,CAAW,CAChB,MAAKxB,QAAL,CAAc,CACZgB,YAAY,CAAE,CACZC,MAAM,CAAE,SADI,CAEZC,OAAO,CACL,qEAHU,CADF,CAAd,EAQA,MAAKG,SAAL,CAAiBC,UAAU,CAAC,UAAM,CAChC,MAAKtB,QAAL,CAAc,CAAEgB,YAAY,CAAE,IAAhB,CAAd,EACD,CAF0B,CAExB,IAFwB,CAA3B,CAGD,CA3BH,EA4BD,C,oGAtEmB,iBAClB,GAAMS,CAAAA,MAAM,CAAG,KAAKZ,KAAL,CAAWa,KAAX,CAAiBC,MAAjB,CAAwBC,EAAvC,CACA7C,UAAU,CACP8C,YADH,CACgBJ,MADhB,EAEGb,IAFH,CAEQ,SAACL,IAAD,CAAU,CACd,MAAI,CAACP,QAAL,CAAc,CAAEb,IAAI,CAAEoB,IAAR,CAAd,EACD,CAJH,EAKGgB,KALH,CAKS,SAACC,KAAD,CAAW,CAChBM,OAAO,CAACC,GAAR,CAAYP,KAAZ,EACD,CAPH,EAQC,C,uCA8DM,CACP,mBACI,2BAAK,SAAS,CAAC,SAAf,eACA,4BAAM,SAAS,CAAC,MAAhB,CAAuB,QAAQ,CAAE,KAAKrB,YAAtC,eACE,0BAAI,SAAS,CAAC,QAAd,iBADF,cAEE,2BAAK,KAAK,CAAE,CAAC6B,KAAK,CAAE,GAAR,CAAaC,MAAM,CAAE,GAArB,CAAZ,CAAuC,GAAG,CAAE,KAAK/C,KAAL,CAAWC,IAAX,CAAgB+C,UAA5D,CAAwE,GAAG,CAAC,QAA5E,EAFF,cAGE,6BAAO,SAAS,CAAC,OAAjB,CAAyB,OAAO,CAAC,OAAjC,EAHF,cAKI,6BACE,GAAG,CAAE,KAAK1C,QADZ,CAEE,QAAQ,CAAE,KAAKE,YAFjB,CAGE,EAAE,CAAC,WAHL,CAIE,IAAI,CAAC,WAJP,CAKE,IAAI,CAAC,MALP,EALJ,cAaE,2BAAK,SAAS,CAAC,YAAf,eACE,6BAAO,SAAS,CAAC,OAAjB,CAAyB,OAAO,CAAC,UAAjC,aADF,cAIE,6BACE,SAAS,CAAC,OADZ,CAEE,EAAE,CAAC,UAFL,CAGE,IAAI,CAAC,MAHP,CAIE,IAAI,CAAC,UAJP,CAKE,QAAQ,CAAE,KAAKA,YALjB,CAME,KAAK,CAAE,KAAKR,KAAL,CAAWC,IAAX,CAAgBC,QANzB,EAJF,CAYG,CAAC,KAAKa,YAAL,CAAkB,UAAlB,CAAD,eACC,yBAAG,SAAS,CAAC,aAAb,kBAbJ,CAbF,cA8BE,2BAAK,SAAS,CAAC,YAAf,eACE,6BAAO,SAAS,CAAC,OAAjB,CAAyB,OAAO,CAAC,UAAjC,aADF,cAIE,6BACE,SAAS,CAAC,OADZ,CAEE,EAAE,CAAC,UAFL,CAGE,IAAI,CAAC,MAHP,CAIE,IAAI,CAAC,UAJP,CAKE,QAAQ,CAAE,KAAKP,YALjB,CAME,KAAK,CAAE,KAAKR,KAAL,CAAWC,IAAX,CAAgBE,QAAhB,EAA4B,EANrC,EAJF,CAaG,CAAC,KAAKY,YAAL,CAAkB,UAAlB,CAAD,eACC,yBAAG,SAAS,CAAC,aAAb,kBAdJ,CA9BF,cA+CE,2BAAK,SAAS,CAAC,YAAf,eACE,6BAAO,SAAS,CAAC,OAAjB,CAAyB,OAAO,CAAC,aAAjC,iBADF,cAIE,6BACE,SAAS,CAAC,OADZ,CAEE,EAAE,CAAC,aAFL,CAGE,IAAI,CAAC,MAHP,CAIE,IAAI,CAAC,aAJP,CAKE,QAAQ,CAAE,KAAKP,YALjB,CAME,KAAK,CAAE,KAAKR,KAAL,CAAWC,IAAX,CAAgBgD,WANzB,EAJF,CAYG,CAAC,KAAKlC,YAAL,CAAkB,aAAlB,CAAD,eACC,yBAAG,SAAS,CAAC,aAAb,kBAbJ,CA/CF,cA+DE,yCA/DF,CADA,CADJ,CAsED,C,yBA5JuBpB,S,EAApBI,W,CACGmD,W,CAAcpD,W,CA8JvB,cAAeC,CAAAA,WAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { buildFormData } from \"../../utils\";\nimport apiHandler from \"../../api/apiHandler\";\nimport UserContext from \"../Auth/UserContext\";\n\n\nclass FormProfile extends Component {\n  static contextType = UserContext;\n  state = {\n      user: {\n        username: \"\",\n        password:\"\",\n        profilImg: \"\",\n        phone_number: 0,\n      }\n  };\n\n  imageRef = React.createRef();\n\n  componentDidMount() {\n    const userId = this.props.match.params.id;\n    apiHandler\n      .getUserInfos(userId)\n      .then((data) => {\n        this.setState({ user: data});\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n    }\n\n  handleChange = (event) => {\n    const key = event.target.name; \n    const value = event.target.value;\n    this.setState({ user: { ...this.state.user, [key]: value } });\n  };\n\n  isValidInput = (key) => {\n    if (this.state.user[key] === \"\") {\n      return false;\n    } else return true;\n  };\n\n  checkError = () => {\n    for (const key in this.state.user) {\n      if (this.state[key] === \"\") {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    const fd = new FormData();\n    const {...data} = this.state;\n    buildFormData(fd, data)\n\n    fd.append(\"profileImg\", this.imageRef.current.files[0]);\n    \n\n    apiHandler\n      .updateUser(fd)\n      .then((data) => {\n        this.props.history.push(\"/profile\");\n        this.setState({\n          httpResponse: {\n            status: \"success\",\n            message: \"Profile successfully updated.\",\n          },\n        });\n        this.context.setUser(data);\n        this.timeoutId = setTimeout(() => {\n          this.setState({ httpResponse: null });\n        }, 2000);\n      })\n      .catch((error) => {\n        this.setState({\n          httpResponse: {\n            status: \"failure\",\n            message:\n              \"Something bad happened while updating your profile, try again later\",\n          },\n        });\n\n        this.timeoutId = setTimeout(() => {\n          this.setState({ httpResponse: null });\n        }, 2000);\n      });\n  };\n\n  render() {\n    return (\n        <div className=\"missing\">\n        <form className=\"form\" onSubmit={this.handleSubmit}>\n          <h1 className=\"header\">Edit profile</h1>\n          <img style={{width: 100, height: 100}} src={this.state.user.profileImg} alt=\"animal\"/>\n          <label className=\"label\" htmlFor=\"image\">\n            </label>\n            <input\n              ref={this.imageRef}\n              onChange={this.handleChange}\n              id=\"profilImg\"\n              name=\"profilImg\"\n              type=\"file\"\n            />\n            \n          <div className=\"form-group\">\n            <label className=\"label\" htmlFor=\"username\">\n              Username\n            </label>\n            <input\n              className=\"input\"\n              id=\"username\"\n              type=\"text\"\n              name=\"username\"\n              onChange={this.handleChange}\n              value={this.state.user.username}\n            />\n            {!this.isValidInput(\"username\") && (\n              <p className=\"input-error\">Invalid input</p>\n            )}\n          </div>\n\n          <div className=\"form-group\">\n            <label className=\"label\" htmlFor=\"password\">\n              Password\n            </label>\n            <input\n              className=\"input\"\n              id=\"password\"\n              type=\"text\"\n              name=\"password\"\n              onChange={this.handleChange}\n              value={this.state.user.password || \"\"}\n              \n            />\n            {!this.isValidInput(\"password\") && (\n              <p className=\"input-error\">Invalid input</p>\n            )}\n          </div>\n          <div className=\"form-group\">\n            <label className=\"label\" htmlFor=\"phoneNumber\">\n              Phone number\n            </label>\n            <input\n              className=\"input\"\n              id=\"phoneNumber\"\n              type=\"text\"\n              name=\"phoneNumber\"\n              onChange={this.handleChange}\n              value={this.state.user.phoneNumber}\n            />\n            {!this.isValidInput(\"phoneNumber\") && (\n              <p className=\"input-error\">Invalid input</p>\n            )}\n          </div>\n          <button>Save</button>\n        </form>\n      \n      </div>\n    );\n  }\n}\n\nexport default FormProfile;\n"]},"metadata":{},"sourceType":"module"}
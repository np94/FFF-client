{"ast":null,"code":"import _objectWithoutProperties from\"/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _defineProperty from\"/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import apiHandler from'../../api/apiHandler';import UserContext from\"../Auth/UserContext\";import{buildFormData}from\"../../utils\";var FormEditAnnounce=/*#__PURE__*/function(_Component){_inherits(FormEditAnnounce,_Component);var _super=_createSuper(FormEditAnnounce);function FormEditAnnounce(){var _this$state;var _this;_classCallCheck(this,FormEditAnnounce);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state=(_this$state={title:\"\",name:\"\",location:\"\",email:\"\",description:\"\",image:\"\"},_defineProperty(_this$state,\"location\",{coordinates:[]}),_defineProperty(_this$state,\"status\",\"\"),_defineProperty(_this$state,\"pet_type\",\"\"),_defineProperty(_this$state,\"comments\",\"\"),_this$state);_this.imageRef=React.createRef();_this.handleChange=function(event){var value=event.target.value;var key=event.target.name;_this.setState(_defineProperty({},key,value));};_this.handleSubmit=function(event){event.preventDefault();var fd=new FormData();var _this$state2=_this.state,httpResponse=_this$state2.httpResponse,data=_objectWithoutProperties(_this$state2,[\"httpResponse\"]);buildFormData(fd,data);fd.append(\"image\",_this.imageRef.current.files[0]);var announceId=_this.props.match.params.id;apiHandler.updateAnnounce(announceId,fd).then(function(data){_this.props.history.push(\"/profile\");_this.setState({httpResponse:{status:\"success\",message:\"Item successfully added.\"}});_this.timeoutId=setTimeout(function(){_this.setState({httpResponse:null});},1000);}).catch(function(error){_this.setState({httpResponse:{status:\"failure\",message:\"An error occured, try again later.\"}});_this.timeoutId=setTimeout(function(){_this.setState({httpResponse:null});},1000);});};return _this;}_createClass(FormEditAnnounce,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var announceId=this.props.match.params.id;apiHandler.getOneAnnounce(announceId).then(function(apiResponse){console.log(apiResponse);_this2.setState({announce:apiResponse});}).catch(function(error){console.log(error);});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit,ref:this.formRef},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"title\"},\"Title\"),/*#__PURE__*/React.createElement(\"input\",{onChange:this.handleChange,value:this.state.title,id:\"title\",name:\"title\",type:\"text\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"name\"},\"Name\"),/*#__PURE__*/React.createElement(\"input\",{onChange:this.handleChange,value:this.state.name,id:\"name\",name:\"name\",type:\"text\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"location\"},\"Location\"),/*#__PURE__*/React.createElement(\"input\",{onChange:this.handleChange,value:this.state.location.coordinates,id:\"location\",name:\"location\",type:\"text\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"email\"},\"E-mail\"),/*#__PURE__*/React.createElement(\"input\",{onChange:this.handleChange,value:this.state.email,id:\"email\",name:\"email\",type:\"text\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"label\",htmlFor:\"status\"},\"Status\"),/*#__PURE__*/React.createElement(\"select\",{name:\"status\",id:\"status\",onChange:this.handleChange,value:this.state.status},/*#__PURE__*/React.createElement(\"option\",{value:\"\",disabled:true},\"Select a status\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Missing\"},\"Missing\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Found\"},\"Found\")))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"description\"},\"Description\"),/*#__PURE__*/React.createElement(\"input\",{onChange:this.handleChange,value:this.state.description,id:\"description\",name:\"description\",type:\"text\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"image\"},\"Image\"),/*#__PURE__*/React.createElement(\"input\",{ref:this.imageRef,onChange:this.handleChange,value:this.state.image,id:\"image\",name:\"image\",type:\"file\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"pet_type\"},\"Pet type\"),/*#__PURE__*/React.createElement(\"input\",{onChange:this.handleChange,value:this.state.pet_type,id:\"pet_type\",name:\"pet_type\",type:\"text\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"comments\"},\"Comments\"),/*#__PURE__*/React.createElement(\"input\",{onChange:this.handleChange,value:this.state.comments,id:\"comments\",name:\"comments\",type:\"text\"})),/*#__PURE__*/React.createElement(\"button\",null,\"Submit !\"));}}]);return FormEditAnnounce;}(Component);FormEditAnnounce.contextType=UserContext;;export default FormEditAnnounce;","map":{"version":3,"sources":["/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/src/components/Forms/FormEditAnnounce.jsx"],"names":["React","Component","apiHandler","UserContext","buildFormData","FormEditAnnounce","state","title","name","location","email","description","image","coordinates","imageRef","createRef","handleChange","event","value","target","key","setState","handleSubmit","preventDefault","fd","FormData","httpResponse","data","append","current","files","announceId","props","match","params","id","updateAnnounce","then","history","push","status","message","timeoutId","setTimeout","catch","error","getOneAnnounce","apiResponse","console","log","announce","formRef","pet_type","comments","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport apiHandler from '../../api/apiHandler';\nimport UserContext from \"../Auth/UserContext\";\nimport { buildFormData } from \"../../utils\";\n\n\nclass FormEditAnnounce extends Component {\n    static contextType = UserContext;\n    state = {\n        title: \"\",\n        name: \"\",\n        location: \"\",\n        email: \"\",\n        description: \"\",\n        image:\"\",\n        location: {\n          coordinates: [],\n        },\n        status:\"\",\n        pet_type:\"\",\n        comments:\"\",\n    };\n\n    imageRef = React.createRef();\n\n    componentDidMount() {\n        const announceId = this.props.match.params.id;\n        apiHandler\n          .getOneAnnounce(announceId)\n          .then((apiResponse) => {\n            console.log(apiResponse)\n            this.setState({\n               announce: apiResponse\n            });\n          })\n          .catch((error) => {\n            console.log(error);\n          });\n      }\n\n      handleChange = (event) => {\n        const value = event.target.value;\n        const key = event.target.name;\n        this.setState({ [key]: value });\n      };\n\n\n    handleSubmit = (event) => {\n        event.preventDefault();\n        const fd = new FormData();\n        const { httpResponse, ...data } = this.state;\n        buildFormData(fd, data)\n\n        fd.append(\"image\", this.imageRef.current.files[0]);\n\n        const announceId = this.props.match.params.id;\n\n        apiHandler\n          .updateAnnounce(announceId, fd)\n          .then((data) => {\n            this.props.history.push(\"/profile\");\n            this.setState({\n                httpResponse: {\n                  status: \"success\",\n                  message: \"Item successfully added.\",\n                },\n              });\n              this.timeoutId = setTimeout(() => {\n                this.setState({ httpResponse: null });\n              }, 1000);\n            })\n            .catch((error) => {\n              this.setState({\n                httpResponse: {\n                  status: \"failure\",\n                  message: \"An error occured, try again later.\",\n                },\n              });\n              this.timeoutId = setTimeout(() => {\n                this.setState({ httpResponse: null });\n              }, 1000);\n            });\n      \n      };\n    \n\n    render() {\n        return (\n            <form onSubmit={this.handleSubmit}\n            ref={this.formRef}>\n                <div>\n                <label htmlFor=\"title\">Title</label>\n            <input\n              onChange={this.handleChange}\n              value={this.state.title}\n              id=\"title\"\n              name=\"title\"\n              type=\"text\"\n            />\n                </div>\n          <div>\n          <label htmlFor=\"name\">Name</label>\n            <input\n              onChange={this.handleChange}\n              value={this.state.name}\n              id=\"name\"\n              name=\"name\"\n              type=\"text\"\n            />\n          </div>\n            <div>\n            <label htmlFor=\"location\">Location</label>\n            <input\n              onChange={this.handleChange}\n              value={this.state.location.coordinates}\n              id=\"location\"\n              name=\"location\"\n              type=\"text\"\n            />\n            </div>\n            <div>\n            <label htmlFor=\"email\">E-mail</label>\n            <input\n              onChange={this.handleChange}\n              value={this.state.email}\n              id=\"email\"\n              name=\"email\"\n              type=\"text\"\n            />\n            <div className=\"form-group\">\n            <label className=\"label\" htmlFor=\"status\">\n              Status\n            </label>\n            <select\n              name=\"status\"\n              id=\"status\"\n              onChange={this.handleChange}\n              value={this.state.status}\n            >\n              <option value=\"\" disabled>\n                Select a status\n              </option>\n              <option value=\"Missing\">Missing</option>\n              <option value=\"Found\">Found</option>\n            </select>\n          </div>\n            </div>\n            <div>\n            <label htmlFor=\"description\">Description</label>\n            <input\n              onChange={this.handleChange}\n              value={this.state.description}\n              id=\"description\"\n              name=\"description\"\n              type=\"text\"\n            />\n            </div>\n         \n            <div>\n            <label htmlFor=\"image\">Image</label>\n            <input\n              ref={this.imageRef}\n              onChange={this.handleChange}\n              value={this.state.image}\n              id=\"image\"\n              name=\"image\"\n              type=\"file\"\n            />\n            </div>\n           \n         \n            <div>\n            <label htmlFor=\"pet_type\">Pet type</label>\n            <input\n              onChange={this.handleChange}\n              value={this.state.pet_type}\n              id=\"pet_type\"\n              name=\"pet_type\"\n              type=\"text\"\n            />\n            </div>\n           \n           <div>\n           <label htmlFor=\"comments\">Comments</label>\n            <input\n              onChange={this.handleChange}\n              value={this.state.comments}\n              id=\"comments\"\n              name=\"comments\"\n              type=\"text\"\n            />\n           </div>\n           \n            <button>Submit !</button>\n          </form>\n        );\n    };\n};\n\nexport default FormEditAnnounce;"]},"metadata":{},"sourceType":"module"}
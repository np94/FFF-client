{"ast":null,"code":"import _classCallCheck from\"/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import ReactMapboxGl,{Layer,Feature}from\"react-mapbox-gl\";var Map=ReactMapboxGl({accessToken:process.env.REACT_APP_MAPBOX_TOKEN});var missingImg=new Image(20,30);missingImg.src=\"/media/paw-print.png\";var foundImg=new Image(20,30);foundImg.src=\"/media/wanted.png\";var AppMap=/*#__PURE__*/function(_React$PureComponent){_inherits(AppMap,_React$PureComponent);var _super=_createSuper(AppMap);function AppMap(){var _this;_classCallCheck(this,AppMap);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={lng:2.349014,// Default lng and lat set to the center of paris.\nlat:48.864716,zoom:12// used for map zoom level\n};_this.handleClick=function(selectedAnnounce){// Pass the selectedItem back to the parent.\n_this.props.handleSelectAnnounce(selectedAnnounce);};return _this;}_createClass(AppMap,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// Get users geo location and set it as the state so the map centers relative to the users current location. :)\nvar success=function success(position){var latitude=position.coords.latitude;var longitude=position.coords.longitude;_this2.setState({lat:latitude,lng:longitude});};var error=function error(){console.log(\"An error occured geolocating user\");};if(!navigator.geolocation){console.log(\"Geolocation not supported\");}else{navigator.geolocation.getCurrentPosition(success,error);}}},{key:\"render\",value:function render(){var _this3=this;var missings=this.props.announces.filter(function(announce){return announce.status[0]===\"Missing\";});var founds=this.props.announces.filter(function(announce){return announce.status[0]===\"Found\";});var missingLayer=/*#__PURE__*/React.createElement(Layer,{type:\"symbol\",id:\"missing\",images:[\"missing-icon\",missingImg],layout:{\"icon-image\":\"missing-icon\"}},missings.map(function(announce,index){return/*#__PURE__*/React.createElement(Feature,{key:index,onClick:function onClick(event){return _this3.handleClick(announce);},coordinates:announce.location.coordinates});}));var foundLayer=/*#__PURE__*/React.createElement(Layer,{type:\"symbol\",id:\"found\",images:[\"found-icon\",foundImg],layout:{\"icon-image\":\"found-icon\"}},founds.map(function(announce,index){return/*#__PURE__*/React.createElement(Feature,{key:index,onClick:function onClick(event){return _this3.handleClick(announce);},coordinates:announce.location.coordinates});}));return/*#__PURE__*/React.createElement(Map// eslint-disable-next-line\n,{style:\"mapbox://styles/mapbox/light-v10\",zoom:[12],containerStyle:{top:0,left:0,bottom:0,right:0,position:\"absolute\"},center:[this.state.lng,this.state.lat]},missingLayer,foundLayer);}}]);return AppMap;}(React.PureComponent);export default AppMap;","map":{"version":3,"sources":["/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/src/components/AppMap.jsx"],"names":["React","ReactMapboxGl","Layer","Feature","Map","accessToken","process","env","REACT_APP_MAPBOX_TOKEN","missingImg","Image","src","foundImg","AppMap","state","lng","lat","zoom","handleClick","selectedAnnounce","props","handleSelectAnnounce","success","position","latitude","coords","longitude","setState","error","console","log","navigator","geolocation","getCurrentPosition","missings","announces","filter","announce","status","founds","missingLayer","map","index","event","location","coordinates","foundLayer","top","left","bottom","right","PureComponent"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport ReactMapboxGl, { Layer, Feature } from \"react-mapbox-gl\";\n\nconst Map = ReactMapboxGl({\n    accessToken: process.env.REACT_APP_MAPBOX_TOKEN,\n});\n\nconst missingImg = new Image(20, 30);\nmissingImg.src = \"/media/paw-print.png\";\n\nconst foundImg = new Image(20, 30);\nfoundImg.src = \"/media/wanted.png\";\n\n\nclass AppMap extends React.PureComponent {\n    state = {\n      lng: 2.349014, // Default lng and lat set to the center of paris.\n      lat: 48.864716,\n      zoom: 12, // used for map zoom level\n    };\n  \n    componentDidMount() {\n      // Get users geo location and set it as the state so the map centers relative to the users current location. :)\n      const success = (position) => {\n        const latitude = position.coords.latitude;\n        const longitude = position.coords.longitude;\n        this.setState({ lat: latitude, lng: longitude });\n      };\n  \n      const error = () => {\n        console.log(\"An error occured geolocating user\");\n      };\n  \n      if (!navigator.geolocation) {\n        console.log(\"Geolocation not supported\");\n      } else {\n        navigator.geolocation.getCurrentPosition(success, error);\n      }\n    }\n  \n    handleClick = (selectedAnnounce) => {\n      // Pass the selectedItem back to the parent.\n      this.props.handleSelectAnnounce(selectedAnnounce);\n    };\n  \n    render() {\n      const missings = this.props.announces.filter(\n        (announce) => announce.status[0] === \"Missing\"\n      );\n  \n      const founds = this.props.announces.filter(\n        (announce) => announce.status[0] === \"Found\"\n      );\n  \n      const missingLayer = (\n        <Layer\n          type=\"symbol\"\n          id=\"missing\"\n          images={[\"missing-icon\", missingImg]}\n          layout={{ \"icon-image\": \"missing-icon\" }}\n        >\n          {missings.map((announce, index) => (\n            <Feature\n              key={index}\n              onClick={(event) => this.handleClick(announce)}\n              coordinates={announce.location.coordinates}\n            />\n          ))}\n        </Layer>\n      );\n  \n      const foundLayer = (\n        <Layer\n          type=\"symbol\"\n          id=\"found\"\n          images={[\"found-icon\", foundImg]}\n          layout={{ \"icon-image\": \"found-icon\" }}\n        >\n          {founds.map((announce, index) => (\n            <Feature\n              key={index}\n              onClick={(event) => this.handleClick(announce)}\n              coordinates={announce.location.coordinates}\n            />\n          ))}\n        </Layer>\n      );\n  \n      \n      return (\n        <Map\n          // eslint-disable-next-line\n          style=\"mapbox://styles/mapbox/light-v10\"\n          zoom={[12]}\n          containerStyle={{\n            top: 0,\n            left: 0,\n            bottom: 0,\n            right: 0,\n            position: \"absolute\",\n          }}\n          center={[this.state.lng, this.state.lat]}\n        >\n          {missingLayer}\n          {foundLayer}\n    \n        </Map>\n      );\n    }\n  }\n  \n  export default AppMap;\n  "]},"metadata":{},"sourceType":"module"}
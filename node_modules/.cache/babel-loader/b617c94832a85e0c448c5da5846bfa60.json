{"ast":null,"code":"var _jsxFileName = \"/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/src/components/Forms/FormEditAnnounce.jsx\";\nimport React, { Component } from 'react';\nimport apiHandler from '../../api/apiHandler';\nimport UserContext from \"../Auth/UserContext\";\nimport { buildFormData } from \"../../utils\";\n\nclass FormEditAnnounce extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      title: \"\",\n      name: \"\",\n      location: \"\",\n      email: \"\",\n      description: \"\",\n      image: \"\",\n      location: {\n        coordinates: []\n      },\n      status: \"\",\n      pet_type: \"\",\n      comments: \"\"\n    };\n    this.imageRef = React.createRef();\n\n    this.handleChange = event => {\n      const value = event.target.value;\n      const key = event.target.name;\n      this.setState({\n        [key]: value\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      const fd = new FormData();\n      const {\n        httpResponse,\n        ...data\n      } = this.state;\n      buildFormData(fd, data);\n      fd.append(\"image\", this.imageRef.current.files[0]);\n      const announceId = this.props.match.params.id;\n      apiHandler.updateAnnounce(announceId, fd).then(data => {\n        this.props.history.push(\"/profile\");\n        this.setState({\n          httpResponse: {\n            status: \"success\",\n            message: \"Item successfully added.\"\n          }\n        });\n        this.timeoutId = setTimeout(() => {\n          this.setState({\n            httpResponse: null\n          });\n        }, 1000);\n      }).catch(error => {\n        this.setState({\n          httpResponse: {\n            status: \"failure\",\n            message: \"An error occured, try again later.\"\n          }\n        });\n        this.timeoutId = setTimeout(() => {\n          this.setState({\n            httpResponse: null\n          });\n        }, 1000);\n      });\n    };\n  }\n\n  componentDidMount() {\n    const announceId = this.props.match.params.id;\n    apiHandler.getOneAnnounce(announceId).then(apiResponse => {\n      console.log(apiResponse);\n      this.setState({\n        announce: apiResponse\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      ref: this.formRef,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }\n    }, \"Title\"), /*#__PURE__*/React.createElement(\"input\", {\n      onChange: this.handleChange,\n      value: this.state.title,\n      id: \"title\",\n      name: \"title\",\n      type: \"text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }\n    }, \"Name\"), /*#__PURE__*/React.createElement(\"input\", {\n      onChange: this.handleChange,\n      value: this.state.name,\n      id: \"name\",\n      name: \"name\",\n      type: \"text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"location\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }\n    }, \"Location\"), /*#__PURE__*/React.createElement(\"input\", {\n      onChange: this.handleChange,\n      value: this.state.location.coordinates,\n      id: \"location\",\n      name: \"location\",\n      type: \"text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 13\n      }\n    }, \"E-mail\"), /*#__PURE__*/React.createElement(\"input\", {\n      onChange: this.handleChange,\n      value: this.state.email,\n      id: \"email\",\n      name: \"email\",\n      type: \"text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"label\",\n      htmlFor: \"status\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 13\n      }\n    }, \"Status\"), /*#__PURE__*/React.createElement(\"select\", {\n      name: \"status\",\n      id: \"status\",\n      onChange: this.handleChange,\n      value: this.state.category,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 15\n      }\n    }, \"Select a status\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"Missing\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 15\n      }\n    }, \"Missing\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"Found\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 15\n      }\n    }, \"Found\")))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 13\n      }\n    }, \"Description\"), /*#__PURE__*/React.createElement(\"input\", {\n      onChange: this.handleChange,\n      value: this.state.description,\n      id: \"description\",\n      name: \"description\",\n      type: \"text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"image\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 13\n      }\n    }, \"Image\"), /*#__PURE__*/React.createElement(\"input\", {\n      ref: this.imageRef,\n      onChange: this.handleChange,\n      value: this.state.image,\n      id: \"image\",\n      name: \"image\",\n      type: \"file\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"pet_type\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 13\n      }\n    }, \"Pet type\"), /*#__PURE__*/React.createElement(\"input\", {\n      onChange: this.handleChange,\n      value: this.state.pet_type,\n      id: \"pet_type\",\n      name: \"pet_type\",\n      type: \"text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"comments\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 12\n      }\n    }, \"Comments\"), /*#__PURE__*/React.createElement(\"input\", {\n      onChange: this.handleChange,\n      value: this.state.comments,\n      id: \"comments\",\n      name: \"comments\",\n      type: \"text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 13\n      }\n    }, \"Submit !\"));\n  }\n\n}\n\nFormEditAnnounce.contextType = UserContext;\n;\nexport default FormEditAnnounce;","map":{"version":3,"sources":["/Users/NisaKhahidir/Ironhack/projectpets/FurryFriendFinder/FFF/client/src/components/Forms/FormEditAnnounce.jsx"],"names":["React","Component","apiHandler","UserContext","buildFormData","FormEditAnnounce","state","title","name","location","email","description","image","coordinates","status","pet_type","comments","imageRef","createRef","handleChange","event","value","target","key","setState","handleSubmit","preventDefault","fd","FormData","httpResponse","data","append","current","files","announceId","props","match","params","id","updateAnnounce","then","history","push","message","timeoutId","setTimeout","catch","error","componentDidMount","getOneAnnounce","apiResponse","console","log","announce","render","formRef","category","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport apiHandler from '../../api/apiHandler';\nimport UserContext from \"../Auth/UserContext\";\nimport { buildFormData } from \"../../utils\";\n\n\nclass FormEditAnnounce extends Component {\n    static contextType = UserContext;\n    state = {\n        title: \"\",\n        name: \"\",\n        location: \"\",\n        email: \"\",\n        description: \"\",\n        image:\"\",\n        location: {\n          coordinates: [],\n        },\n        status:\"\",\n        pet_type:\"\",\n        comments:\"\",\n    };\n\n    imageRef = React.createRef();\n\n    componentDidMount() {\n        const announceId = this.props.match.params.id;\n        apiHandler\n          .getOneAnnounce(announceId)\n          .then((apiResponse) => {\n            console.log(apiResponse)\n            this.setState({\n               announce: apiResponse\n            });\n          })\n          .catch((error) => {\n            console.log(error);\n          });\n      }\n\n      handleChange = (event) => {\n        const value = event.target.value;\n        const key = event.target.name;\n        this.setState({ [key]: value });\n      };\n\n\n    handleSubmit = (event) => {\n        event.preventDefault();\n        const fd = new FormData();\n        const { httpResponse, ...data } = this.state;\n        buildFormData(fd, data)\n\n        fd.append(\"image\", this.imageRef.current.files[0]);\n\n        const announceId = this.props.match.params.id;\n\n        apiHandler\n          .updateAnnounce(announceId, fd)\n          .then((data) => {\n            this.props.history.push(\"/profile\");\n            this.setState({\n                httpResponse: {\n                  status: \"success\",\n                  message: \"Item successfully added.\",\n                },\n              });\n              this.timeoutId = setTimeout(() => {\n                this.setState({ httpResponse: null });\n              }, 1000);\n            })\n            .catch((error) => {\n              this.setState({\n                httpResponse: {\n                  status: \"failure\",\n                  message: \"An error occured, try again later.\",\n                },\n              });\n              this.timeoutId = setTimeout(() => {\n                this.setState({ httpResponse: null });\n              }, 1000);\n            });\n      \n      };\n    \n\n    render() {\n        return (\n            <form onSubmit={this.handleSubmit}\n            ref={this.formRef}>\n                <div>\n                <label htmlFor=\"title\">Title</label>\n            <input\n              onChange={this.handleChange}\n              value={this.state.title}\n              id=\"title\"\n              name=\"title\"\n              type=\"text\"\n            />\n                </div>\n          <div>\n          <label htmlFor=\"name\">Name</label>\n            <input\n              onChange={this.handleChange}\n              value={this.state.name}\n              id=\"name\"\n              name=\"name\"\n              type=\"text\"\n            />\n          </div>\n            <div>\n            <label htmlFor=\"location\">Location</label>\n            <input\n              onChange={this.handleChange}\n              value={this.state.location.coordinates}\n              id=\"location\"\n              name=\"location\"\n              type=\"text\"\n            />\n            </div>\n            <div>\n            <label htmlFor=\"email\">E-mail</label>\n            <input\n              onChange={this.handleChange}\n              value={this.state.email}\n              id=\"email\"\n              name=\"email\"\n              type=\"text\"\n            />\n            <div className=\"form-group\">\n            <label className=\"label\" htmlFor=\"status\">\n              Status\n            </label>\n            <select\n              name=\"status\"\n              id=\"status\"\n              onChange={this.handleChange}\n              value={this.state.category}\n            >\n              <option value=\"\" disabled>\n                Select a status\n              </option>\n              <option value=\"Missing\">Missing</option>\n              <option value=\"Found\">Found</option>\n            </select>\n          </div>\n            </div>\n            <div>\n            <label htmlFor=\"description\">Description</label>\n            <input\n              onChange={this.handleChange}\n              value={this.state.description}\n              id=\"description\"\n              name=\"description\"\n              type=\"text\"\n            />\n            </div>\n         \n            <div>\n            <label htmlFor=\"image\">Image</label>\n            <input\n              ref={this.imageRef}\n              onChange={this.handleChange}\n              value={this.state.image}\n              id=\"image\"\n              name=\"image\"\n              type=\"file\"\n            />\n            </div>\n           \n         \n            <div>\n            <label htmlFor=\"pet_type\">Pet type</label>\n            <input\n              onChange={this.handleChange}\n              value={this.state.pet_type}\n              id=\"pet_type\"\n              name=\"pet_type\"\n              type=\"text\"\n            />\n            </div>\n           \n           <div>\n           <label htmlFor=\"comments\">Comments</label>\n            <input\n              onChange={this.handleChange}\n              value={this.state.comments}\n              id=\"comments\"\n              name=\"comments\"\n              type=\"text\"\n            />\n           </div>\n           \n            <button>Submit !</button>\n          </form>\n        );\n    };\n};\n\nexport default FormEditAnnounce;"]},"metadata":{},"sourceType":"module"}